// ---------------------------------------
// Prisma 설정
// ---------------------------------------
generator client {
  provider = "prisma-client-js"
}

// ---------------------------------------
// Supabase PostgreSQL 연결
// ---------------------------------------
datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

// ---------------------------------------
// User 테이블 정의
// ---------------------------------------
model User {
  id           String   @id @default(uuid())
  name         String
  phoneLast4   String   @db.VarChar
  passwordHash String? // 비밀번호 해시 (선택)
  qrUrl        String // QR 코드 이미지 경로
  createdAt    DateTime @default(now()) @db.Timestamptz(6)
  updatedAt    DateTime @default(now()) @db.Timestamptz(6)
}

// ---------------------------------------
// 로그인 로그 테이블 정의
// ---------------------------------------
model LoginLog {
  id         String   @id @default(uuid())
  userName   String // 로그인한 고객 이름
  loginAt    DateTime @default(now()) @db.Timestamptz(6) // 로그인 시각
  deviceType String? // ios / android / windows / macos / linux / other / unknown
  userAgent  String? // 원본 UA 문자열
  ip         String? // x-forwarded-for, x-real-ip 기준
}
